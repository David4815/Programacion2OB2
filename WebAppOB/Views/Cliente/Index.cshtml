@using Dominio;
@{
    ViewBag.Title = "Index";
}
<h2>Bienvendio: @(((Dominio.Usuario)Session["usuario"]).Username)!</h2>
<h2>Tipo Usuario: @(((Dominio.Usuario)Session["usuario"]).Tipo)  </h2>

<h2>Cliente vista</h2>

<table id="principalExcursiones">
    <thead>
        <tr>
            <th>Compra</th>

            <th>Descripcion</th>

            <th>Fecha Comienzo</th>

            <th>Cantidad de dias</th>

            <th>Stock</th>

            <th>Destinos Visitados</th>
        </tr>
    </thead>

    <tbody>
        @foreach (Excursion e in Sistema.InstanciaSistema.ListaExcursiones)
        {
        <tr>
            <td>
                @*Preguntarle post y get*@
                <form action="/CompraExcursion/VisualizarExcursion" method="post">
                <input type="hidden" name="CodigoExcursion" value="@e.Codigo" />
                <input type="submit" value="ComprarExcursion" />
                </form>
            </td>
            <td>@e.Descripcion</td>
            @*la Funcion ToShortDateString muestra la fecha sin la hora*@
            <td>@e.FechaComienzo.ToShortDateString()</td>

            <td>@e.CantidadDias</td>

            <td>@e.Stock</td>

            <td>
                <table id="secundariaExcursiones">
                    <thead>
                        <tr>
                            <th>Ciudad</th>
                            <th>Cantidad de dias</th>
                            <th>Costo diario</th>
                        </tr>
                    </thead>

                    <tbody>
                        @foreach (Destino d in e.ListaDestinosDisponibles)
                        {
                            @*if (e.ListaDestinosDisponibles.IndexOf(d) == e.ListaDestinosDisponibles.Count - 1)
                        {
                            <tr>
                                <td>@(d.Ciudad + "-")</td>
                                <td>@(d.CantidadDias + "-")</td>
                                <td>@(d.CostoActualDiario)</td>
                            </tr>


                        }
                        else
                        {*@
                            <tr>
                                <td>@d.Ciudad</td>
                                <td>@d.CantidadDias</td>
                                <td>@d.CostoActualDiario</td>
                            </tr>
                            @*}*@


                        }
                    </tbody>

                </table>
            </td>
        </tr>


            @*@if (e is Dominio.ExcursionInternacional)
                {
                    
                    ExcursionInternacional eInter = e as ExcursionInternacional
                     <
                         <td>@eInter.CompaniaAerea</td>

                }
                else
                {
                    ExcursionNacional eNacional = e as ExcursionNacional;
                    <td>@eNacional.InteresNacional</td>
                }*@




        }
    </tbody>

</table>
